openapi: 3.0.3
info:
  title: API —Å–µ—Ä–≤–µ—Ä –¥–ª—è –ª–∏—á–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ ¬´–ß—Ç–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å¬ª.
  description: |-
    * –°–ø–∏—Å–æ–∫ —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞ ¬´–ß—Ç–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å¬ª.
  version: 1.0.0
tags:
  - name: users
    description: –î–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.
  - name: movies
    description: –î–µ–π—Å—Ç–≤–∏—è —Å —Ñ–∏–ª—å–º–∞–º–∏.
  - name: comments
    description: –î–µ–π—Å—Ç–≤–∏—è —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏.

paths:
  /users/register:
    post:
      tags:
        - users
      summary: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      description: –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

      requestBody:
        description: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/createUser'
            encoding:
              avatar:
                contentType: image/png, image/jpeg
        required: true

      responses:
        "201":
          description: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω. –û–±—ä–µ–∫—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/user'

        "409":
          description: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º email —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.

        "400":
          description: –ù–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∑–∞–ø—Ä–æ—Å, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –∏–ª–∏ —è–≤–ª—è–µ—Ç—Å—è –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º.


  /users/login:
    post:
      tags:
        - users
      summary: –í—Ö–æ–¥ –≤ –∑–∞–∫—Ä—ã—Ç—É—é —á–∞—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
      description: –ê–≤—Ç–æ—Ä–∏–∑—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ª–æ–≥–∏–Ω–∞ –∏ –ø–∞—Ä–æ–ª—è.

      requestBody:
        required: true
        description: –õ–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å –∞–≤—Ç–æ—Ä–∏–∑—É—é—â–µ–≥–æ—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
        content:
          application/json:
            schema:
              type: object

              properties:
                login:
                  type: string
                  example: vladik@vk.ru

                password:
                  type: string
                  example: qwerty123

      responses:
        "200":
          description: >
            –£—Å–ø–µ—à–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω.
            –û–±—ä–µ–∫—Ç —Å —Ç–æ–∫–µ–Ω–æ–º.
            –ö–ª–∏–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–æ—Ç —Ç–æ–∫–µ–Ω –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ª—é–±—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤. –¢–æ–∫–µ–Ω –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö.
          content:
            application/json:
              schema:
                type: object

                properties:
                  token:
                    type: string
                    format: jwt

        "401":
          description: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ª–∏–±–æ –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å —É–∫–∞–∑–∞–Ω—ã –Ω–µ–≤–µ—Ä–Ω–æ.


    get:
      tags:
        - users
      summary: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      description: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

      parameters:
        - in: header
          name: Authorization
          required: true
          schema:
            type: string
            format: Bearer jwt

      responses:
        "200":
          description: –£—Å–ø–µ—à–Ω–æ. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/user'

        "401":
          description: –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ç–æ–∫–µ–Ω. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω.


  /movies/create:
    post:
      tags:
        - movies
      summary: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ñ–∏–ª—å–º–∞
      description: –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–π —Ñ–∏–ª—å–º.

      parameters:
        - in: header
          name: Authorization
          required: true
          schema:
            type: string
            format: Bearer jwt

      requestBody:
        description: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ñ–∏–ª—å–º–∞.
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/createMovie'
        required: true

      responses:
        "201":
          description: –§–∏–ª—å–º –¥–æ–±–∞–≤–ª–µ–Ω. –û–±—ä–µ–∫—Ç —Ñ–∏–ª—å–º–∞.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/movie'

        "400":
          description: –ù–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∑–∞–ø—Ä–æ—Å, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –∏–ª–∏ —è–≤–ª—è–µ—Ç—Å—è –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º.

        "401":
          description: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω. –î–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ–∏–ª—å–º—ã –º–æ–≥—É—Ç —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã.


  /movies/{movieId}:
    get:
      tags:
        - movies
      summary: –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ —Ñ–∏–ª—å–º—É
      description: –ü–æ–ª—É—á–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º—É —Ñ–∏–ª—å–º—É.

      parameters:
        - in: path
          name: movieId
          schema:
            type: string
            format: uuid
          required: true
          description: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ñ–∏–ª—å–º–∞.

      responses:
        "200":
          description: –£—Å–ø–µ—à–Ω–æ. –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ —Ñ–∏–ª—å–º—É.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/movie'

        "404":
          description: –§–∏–ª—å–º–∞ —Å –¥–∞–Ω–Ω—ã–º id –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.

    patch:
      tags:
        - movies
      summary: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Ñ–∏–ª—å–º–∞
      description: –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É —Ñ–∏–ª—å–º–∞, —Å–æ–∑–¥–∞–Ω–Ω—É—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.

      parameters:
        - in: header
          name: Authorization
          required: true
          schema:
            type: string
            format: Bearer jwt
        - in: path
          name: movieId
          schema:
            type: string
            format: uuid
          required: true
          description: Movie id to update.

      requestBody:
        description: –ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ —Ñ–∏–ª—å–º—É.
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/updateMovie'
        required: true

      responses:
        "200":
          description: –§–∏–ª—å–º –æ–±–Ω–æ–≤–ª–µ–Ω. –ù–æ–≤—ã–π –æ–±—ä–µ–∫—Ç —Ñ–∏–ª—å–º–∞.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/movie'

        "400":
          description: –ù–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∑–∞–ø—Ä–æ—Å, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –∏–ª–∏ —è–≤–ª—è–µ—Ç—Å—è –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º.

        "401":
          description: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏ —Ñ–∏–ª—å–º–æ–≤ –º–æ–≥—É—Ç —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã.

        "403":
          description: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –ø—ã—Ç–∞—é—â–∏–π—Å—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É —Ñ–∏–ª—å–º–∞, –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –µ—ë –≤–ª–∞–¥–µ–ª—å—Ü–µ–º, –ø–æ—ç—Ç–æ–º—É –µ–º—É –∑–∞–ø—Ä–µ—â–µ–Ω–æ –µ—ë —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å.

        "404":
          description: –§–∏–ª—å–º–∞ —Å –¥–∞–Ω–Ω—ã–º id –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.


    delete:
      tags:
        - movies
      summary: –£–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Ñ–∏–ª—å–º–∞
      description: –£–¥–∞–ª—è–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É —Ñ–∏–ª—å–º–∞, —Å–æ–∑–¥–∞–Ω–Ω—É—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

      parameters:
        - in: header
          name: Authorization
          required: true
          schema:
            type: string
            format: Bearer jwt
        - in: path
          name: movieId
          schema:
            type: string
            format: uuid
          required: true
          description: Movie id to delete.

      requestBody:
        description: Id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø—ã—Ç–∞—é—â–µ–≥–æ—Å—è —É–¥–∞–ª–∏—Ç—å —Ñ–∏–ª—å–º.
        content:
          application/json:
            schema:
              type: object

      responses:
        "204":
          description: –§–∏–ª—å–º —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω.

        "401":
          description: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω. –£–¥–∞–ª—è—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏ —Ñ–∏–ª—å–º–æ–≤ –º–æ–≥—É—Ç —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã.

        "403":
          description: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –ø—ã—Ç–∞—é—â–∏–π—Å—è —É–¥–∞–ª–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É —Ñ–∏–ª—å–º–∞, –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –µ—ë –≤–ª–∞–¥–µ–ª—å—Ü–µ–º, –ø–æ—ç—Ç–æ–º—É –µ–º—É –∑–∞–ø—Ä–µ—â–µ–Ω–æ –µ—ë —É–¥–∞–ª—è—Ç—å.

        "404":
          description: –§–∏–ª—å–º–∞ —Å –¥–∞–Ω–Ω—ã–º id –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.

  /movies?limit=40&genre=drama:
    get:
      tags:
        - movies
      summary: –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ñ–∏–ª—å–º–æ–≤
      description: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ñ–∏–ª—å–º–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ –±–æ–ª—å—à–µ 60).

      parameters:
        - in: query
          name: limit
          schema:
            type: integer
            default: 60
            example: 40

        - in: query
          name: genre
          schema:
            type: string
            enum: [ comedy, crime, documentary, drama, horror, family, romance, scifi, thriller ]
            example: drama

      responses:
        "200":
          description: –£—Å–ø–µ—à–Ω–æ. –°–ø–∏—Å–æ–∫ —Ñ–∏–ª—å–º–æ–≤, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å—É.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/movieListItem'

        "400":
          description: –ù–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∑–∞–ø—Ä–æ—Å, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –∏–ª–∏ —è–≤–ª—è–µ—Ç—Å—è –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º.


  /movies/promo:
    get:
      tags:
        - movies
      summary: –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–º–æ-—Ñ–∏–ª—å–º–∞
      description: –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ –ø—Ä–æ–º–æ —Ñ–∏–ª—å–º—É.

      responses:
        "200":
          description: –£—Å–ø–µ—à–Ω–æ. –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –ø—Ä–æ–º–æ —Ñ–∏–ª—å–º—É.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/movie'


  /users/to_watch:
    get:
      tags:
        - users
      summary: –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ñ–∏–ª—å–º–æ–≤ ¬´–ö –ø—Ä–æ—Å–º–æ—Ç—Ä—É¬ª
      description: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ñ–∏–ª—å–º–æ–≤, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –∫ –ø—Ä–æ—Å–º–æ—Ç—Ä—É

      parameters:
        - in: header
          name: Authorization
          required: true
          schema:
            type: string
            format: Bearer jwt

      responses:
        "200":
          description: –£—Å–ø–µ—à–Ω–æ. –§–∏–ª—å–º—ã, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –∫ –ø—Ä–æ—Å–º–æ—Ç—Ä—É.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/movieListItem'

        "401":
          description: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω. –ó–∞–ø—Ä–æ—Å –æ—Ç–∫–ª–æ–Ω–µ–Ω.


    post:
      tags:
        - users
      summary: –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å–º –≤ —Å–ø–∏—Å–æ–∫ "–ö –ø—Ä–æ—Å–º–æ—Ç—Ä—É"
      description: –î–æ–±–∞–≤–ª—è–µ—Ç —Ñ–∏–ª—å–º –≤ —Å–ø–∏—Å–æ–∫ "–ö –ø—Ä–æ—Å–º–æ—Ç—Ä—É"

      requestBody:
        description: id —Ñ–∏–ª—å–º–∞, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–±–∞–≤–ª—è—é—Ç –≤ —Å–ø–∏—Å–æ–∫.
        content:
          application/json:
            schema:
              type: object

              properties:
                movieId:
                  type: string
                  format: uuid
                  example: 6329c3d6a04ab1061c6425ease8u342

              required:
                - movieId

      responses:
        "204":
          description: –£—Å–ø–µ—à–Ω–æ. –§–∏–ª—å–º –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Å–ø–∏—Å–æ–∫ "–ö –ø—Ä–æ—Å–º–æ—Ç—Ä—É".

        "401":
          description: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω. –ó–∞–ø—Ä–æ—Å –æ—Ç–∫–ª–æ–Ω–µ–Ω.


    delete:
      tags:
        - users
      summary: –£–¥–∞–ª–∏—Ç—å —Ñ–∏–ª—å–º –∏–∑ —Å–ø–∏—Å–∫–∞ "–ö –ø—Ä–æ—Å–º–æ—Ç—Ä—É"
      description: –£–¥–∞–ª—è–µ—Ç —Ñ–∏–ª—å–º –∏–∑ —Å–ø–∏—Å–∫–∞ "–ö –ø—Ä–æ—Å–º–æ—Ç—Ä—É"

      requestBody:
        description: id —ç—Ç–æ–≥–æ —Ñ–∏–ª—å–º–∞.
        content:
          application/json:
            schema:
              type: object

              properties:
                movieId:
                  type: string
                  format: uuid
                  example: 6329c3d6a04ab1061c6425ease8u342

              required:
                - movieId

      responses:
        "204":
          description: –£—Å–ø–µ—à–Ω–æ. –§–∏–ª—å–º —É–¥–∞–ª–µ–Ω –∏–∑ —Å–ø–∏—Å–∫–∞ "–ö –ø—Ä–æ—Å–º–æ—Ç—Ä—É".

        "401":
          description: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω. –ó–∞–ø—Ä–æ—Å –æ—Ç–∫–ª–æ–Ω–µ–Ω.


  /movies/{movieId}/comments:
    get:
      tags:
        - comments
      summary: –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ —Ñ–∏–ª—å–º–∞
      description: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Ñ–∏–ª—å–º–∞.

      parameters:
        - in: path
          name: movieId
          schema:
            type: string
            format: uuid
          required: true
          description: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–ª—è —Ñ–∏–ª—å–º–∞.

      responses:
        "200":
          description: –£—Å–ø–µ—à–Ω–æ. –°–ø–∏—Å–æ–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∫ —Ñ–∏–ª—å–º—É.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/comment'

        "404":
          description: –§–∏–ª—å–º —Å —Ç–∞–∫–∏–º id –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.


  /comments:
    post:
      tags:
        - comments
      summary: –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º—É —Ñ–∏–ª—å–º—É
      description: –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º—É —Ñ–∏–ª—å–º—É.

      parameters:
        - in: header
          name: Authorization
          required: true
          schema:
            type: string
            format: Bearer jwt

      requestBody:
        description: Id —Ñ–∏–ª—å–º–∞, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –¥–æ–±–∞–≤–ª—è—é—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π, –∏ —Å–∞–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π.
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/comment'
                - type: object
                  properties:
                    movieId:
                      type: string
                      format: uuid
                      example: 6329c3d6a04ab1061c6425ea
                  required:
                    - movieId

      responses:
        "200":
          description: –£—Å–ø–µ—à–Ω–æ. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–æ–±–∞–≤–ª–µ–Ω.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/comment'

        "400":
          description: –ù–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∑–∞–ø—Ä–æ—Å, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –∏–ª–∏ —è–≤–ª—è–µ—Ç—Å—è –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º.

        "401":
          description: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω. –ó–∞–ø—Ä–æ—Å –æ—Ç–∫–ª–æ–Ω–µ–Ω.

        "404":
          description: –§–∏–ª—å–º —Å –¥–∞–Ω–Ω—ã–º id –Ω–µ –Ω–∞–π–¥–µ–Ω.


components:
  schemas:
    createUser:
      type: object

      properties:
        email:
          type: string
          format: email
          example: vladek@vk.ru

        name:
          type: string
          minLength: 1
          maxLength: 15
          example: kisik

        password:
          type: string
          minLength: 6
          maxLength: 12
          example: qwerty123

        avatar:
          type: string
          format: binary

      required:
        - email
        - password
        - name

    user:
      type: object

      properties:
        name:
          type: string
          example: kisik

        email:
          type: string
          example: vladik@vk.com

        avatarPath:
          type: string
          format: uri
          pattern: ([^\s]+(\.(jpg|png))$)
          example: /upload/8chKdsOiK.png


    createMovie:
      type: object

      properties:
        title:
          type: string
          minLength: 2
          maxLength: 100
          example: –ê–≤–∏–∞—Ç–æ—Ä

        description:
          type: string
          minLength: 20
          maxLength: 1024
          example: –ü–æ–ª—É—á–∏–≤ –æ—Ç –æ—Ç—Ü–∞ –Ω–µ–±–æ–ª—å—à—É—é —Ñ–∞–±—Ä–∏–∫—É, –ì–æ–≤–∞—Ä–¥ –•—å—é–∑ –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª –µ–µ –≤ –≥–∏–≥–∞–Ω—Ç—Å–∫–æ–µ, —Ñ–∞–Ω—Ç–∞—Å—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–±—ã–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ. –°—Ç–∞–≤ –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –æ–≥—Ä–æ–º–Ω–æ–π –∫–∏–Ω–æ–∫–æ–º–ø–∞–Ω–∏–∏, –æ–Ω —Å–Ω—è–ª —Å–∞–º—ã–π –¥–æ—Ä–æ–≥–æ–π –¥–ª—è —Å–≤–æ–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —Ñ–∏–ª—å–º –∏ –ø–æ–∫–æ—Ä–∏–ª —Å–µ—Ä–¥—Ü–∞ –ø—Ä–µ–ª–µ—Å—Ç–Ω–µ–π—à–∏—Ö –≥–æ–ª–ª–∏–≤—É–¥—Å–∫–∏—Ö –∞–∫—Ç—Ä–∏—Å.

        publishingDate:
          type: string
          format: date-time
          example: 2005-02-03T23:59:33.903Z

        genre:
          type: string
          enum: [ comedy, crime, documentary, drama, horror, family, romance, scifi, thriller ]
          example: drama

        releaseYear:
          type: integer
          minimum: 1895
          maximum: 2022
          example: 2005

        previewPath:
          type: string
          format: url
          example: https://what-to-watch.ru/preview/aviator.jpg

        moviePath:
          type: string
          format: url
          example: https://what-to-watch.ru/movie/aviator.jpg

        actors:
          type: array
          items:
            type: string
          minItems: 1
          uniqueItems: true
          example: [ –õ–µ–æ–Ω–∞—Ä–¥–æ –î–∏ –ö–∞–ø—Ä–∏–æ, –ö–µ–π—Ç –ë–ª–∞–Ω—à–µ—Ç—Ç, –î–∂—É–¥ –õ–æ ]

        director:
          type: string
          minLength: 2
          maxLength: 50
          example: –ú–∞—Ä—Ç–∏–Ω –°–∫–æ—Ä—Å–µ–∑–µ

        duration:
          type: number
          minimum: 2
          example: 169

        posterPath:
          type: string
          format: uri
          pattern: ([^\s]+(\.(jpg|jpeg))$)
          example: static/aviator.jpg

        backgroundImagePath:
          type: string
          format: uri
          pattern: ([^\s]+(\.(jpg|jpeg))$)
          example: static/8ac7cjck.jpg

        backgroundColor:
          type: string
          example: pink

      required:
        - title
        - description
        - publishingDate
        - genre
        - releaseYear
        - previewPath
        - moviePath
        - actors
        - director
        - duration
        - posterPath
        - backgroundImagePath
        - backgroundColor

    movie:
      type: object

      properties:
        title:
          type: string
          minLength: 2
          maxLength: 100
          example: –ê–≤–∏–∞—Ç–æ—Ä

        description:
          type: string
          minLength: 20
          maxLength: 1024
          example: –ü–æ–ª—É—á–∏–≤ –æ—Ç –æ—Ç—Ü–∞ –Ω–µ–±–æ–ª—å—à—É—é —Ñ–∞–±—Ä–∏–∫—É, –ì–æ–≤–∞—Ä–¥ –•—å—é–∑ –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª –µ–µ –≤ –≥–∏–≥–∞–Ω—Ç—Å–∫–æ–µ, —Ñ–∞–Ω—Ç–∞—Å—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–±—ã–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ. –°—Ç–∞–≤ –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –æ–≥—Ä–æ–º–Ω–æ–π –∫–∏–Ω–æ–∫–æ–º–ø–∞–Ω–∏–∏, –æ–Ω —Å–Ω—è–ª —Å–∞–º—ã–π –¥–æ—Ä–æ–≥–æ–π –¥–ª—è —Å–≤–æ–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —Ñ–∏–ª—å–º –∏ –ø–æ–∫–æ—Ä–∏–ª —Å–µ—Ä–¥—Ü–∞ –ø—Ä–µ–ª–µ—Å—Ç–Ω–µ–π—à–∏—Ö –≥–æ–ª–ª–∏–≤—É–¥—Å–∫–∏—Ö –∞–∫—Ç—Ä–∏—Å.

        publishingDate:
          type: string
          format: date-time
          example: 2005-02-03T23:59:33.903Z

        genre:
          type: string
          enum: [ comedy, crime, documentary, drama, horror, family, romance, scifi, thriller ]
          example: drama

        releaseYear:
          type: integer
          minimum: 1895
          maximum: 2023
          example: 2005

        rating:
          type: integer
          minimum: 0
          maximum: 10
          example: 7

        previewPath:
          type: string
          format: url
          example: https://what-to-watch.ru/preview/aviator.jpg

        moviePath:
          type: string
          format: url
          example: https://what-to-watch.ru/movie/aviator.jpg

        actors:
          type: array
          items:
            type: string
          minItems: 1
          uniqueItems: true
          example: [ –õ–µ–æ–Ω–∞—Ä–¥–æ –î–∏ –ö–∞–ø—Ä–∏–æ, –ö–µ–π—Ç –ë–ª–∞–Ω—à–µ—Ç—Ç, –î–∂—É–¥ –õ–æ ]

        director:
          type: string
          minLength: 2
          maxLength: 50
          example: –ú–∞—Ä—Ç–∏–Ω –°–∫–æ—Ä—Å–µ–∑–µ

        duration:
          type: number
          minimum: 2
          example: 169

        commentsCount:
          type: integer
          minimum: 0
          example: 290

        user:
          $ref: '#/components/schemas/user'

        posterPath:
          type: string
          format: uri
          pattern: ([^\s]+(\.(jpg|jpeg))$)
          example: static/aviator.jpg

        backgroundImagePath:
          type: string
          format: uri
          pattern: ([^\s]+(\.(jpg|jpeg))$)
          example: static/8ac7cjck.jpg

        backgroundColor:
          type: string
          example: pink

      required:
        - title
        - description
        - publishingDate
        - genre
        - releaseYear
        - rating
        - previewPath
        - moviePath
        - actors
        - director
        - duration
        - commentsCount
        - user
        - posterPath
        - backgroundImagePath
        - backgroundColor

    updateMovie:
      allOf:
        - $ref: '#/components/schemas/createMovie'


    movieListItem:
      type: object

      properties:
        title:
          type: string
          minLength: 2
          maxLength: 100
          example: –ê–≤–∏–∞—Ç–æ—Ä

        publishingDate:
          type: string
          format: date-time
          example: 2005-02-03T23:59:33.903Z

        genre:
          type: string
          enum: [ comedy, crime, documentary, drama, horror, family, romance, scifi, thriller ]
          example: drama

        previewPath:
          type: string
          format: url
          example: https://what-to-watch.ru/preview/aviator.jpg

        user:
          $ref: '#/components/schemas/user'

        posterPath:
          type: string
          format: uri
          pattern: ([^\s]+(\.jpg)$)
          example: static/aviator.jpg

        commentsCount:
          type: integer
          minimum: 0
          example: 290

      required:
        - title
        - publishingDate
        - genre
        - previewPath
        - user
        - posterPath
        - commentsCount


    comment:
      type: object

      properties:
        text:
          type: string
          minLength: 5
          maxLength: 1024
          example: –î–∏ –ö–∞–ø—Ä–∏–æ + –°–∫–æ—Ä—Å–µ–∑–µ === üî•üî•üî•

        rating:
          type: integer
          minimum: 0
          maximum: 10
          example: 10

      required:
        - text
        - rating
